/* pipwerks SCORM Wrapper for JavaScript
 * Created by Philip Hutchison, January 2008-2016
 * https://github.com/pipwerks/scorm-api-wrapper
 * MIT License
 */
var pipwerks=pipwerks||{};pipwerks.UTILS={};pipwerks.debug={isActive:!0,trace:function(e){pipwerks.debug.isActive&&window.console&&window.console.log(e)},get:function(e){return pipwerks.debug.isActive?alert(e):void 0}};pipwerks.SCORM={version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{getCode:function(){var e=pipwerks.SCORM.API.handle,t=0;return e&&(t=e.LMSGetLastError?e.LMSGetLastError():e.GetLastError?e.GetLastError():0),t},getInfo:function(e){var t=pipwerks.SCORM.API.handle,r="";return t&&(r=t.LMSGetErrorString?t.LMSGetErrorString(e):t.GetErrorString?t.GetErrorString(e):""),r},getDiagnosticInfo:function(e){var t=pipwerks.SCORM.API.handle,r="";return t&&(r=t.LMSGetDiagnostic?t.LMSGetDiagnostic(e):t.GetDiagnostic?t.GetDiagnostic(e):""),r},save:function(){var e=pipwerks.SCORM.API.handle;return e?e.LMSCommit?e.LMSCommit(""):e.Commit?e.Commit(""):!1:!1}},isAvailable:function(){return!0},API:{find:function(e){var t=null,r=0,n=0,i=500;for(n=0;n<i&&!t&&(e.parent&&e.parent!=e);)n++,r++,t=pipwerks.SCORM.API.scanForAPI(e.parent),e=e.parent;return t},get:function(){var e=null,t=window;if(t.parent&&t.parent!=t&&(e=pipwerks.SCORM.API.find(t)),!e&&t.opener&&(e=pipwerks.SCORM.API.scanForAPI(t.opener)),!e&&t.opener&&t.opener.parent&&(e=pipwerks.SCORM.API.find(t.opener)),e)return pipwerks.SCORM.API.isFound=!0,e;return pipwerks.SCORM.debug.trace("SCORM API not found"),null},scanForAPI:function(e){return e.API_1484_11?(pipwerks.SCORM.version="2004",e.API_1484_11):e.API?(pipwerks.SCORM.version="1.2",e.API):null}},init:function(){var e=pipwerks.SCORM,t=!1;return e.connection.isActive?t=!0:(e.API.handle=e.API.handle||e.API.get(),e.API.handle?(t=e.API.handle.LMSInitialize?e.API.handle.LMSInitialize(""):e.API.handle.Initialize?e.API.handle.Initialize(""):!1,t=e.connection.isActive="true"===String(t)||!0===t,t||pipwerks.SCORM.debug.trace("LMS connection failed")):pipwerks.SCORM.debug.trace("SCORM API not found")),t},get:function(e){var t=pipwerks.SCORM,r=null;return t.connection.isActive?(r=t.API.handle.LMSGetValue?t.API.handle.LMSGetValue(e):t.API.handle.GetValue?t.API.handle.GetValue(e):null,r):null},set:function(e,t){var r=pipwerks.SCORM,n=!1;return r.connection.isActive?(n=r.API.handle.LMSSetValue?r.API.handle.LMSSetValue(e,t):r.API.handle.SetValue?r.API.handle.SetValue(e,t):!1,n="true"===String(n)||!0===n):null},save:function(){var e=pipwerks.SCORM,t=!1;return e.connection.isActive?(t=e.API.handle.LMSCommit?e.API.handle.LMSCommit(""):e.API.handle.Commit?e.API.handle.Commit(""):!1,t):null},quit:function(){var e=pipwerks.SCORM,t=!1;return e.connection.isActive?(t=e.API.handle.LMSFinish?e.API.handle.LMSFinish(""):e.API.handle.Terminate?e.API.handle.Terminate(""):!1,t="true"===String(t)||!0===t,t&&(e.connection.isActive=!1)):null}};